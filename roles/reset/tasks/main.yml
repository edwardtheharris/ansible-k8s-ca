---
  ###
  # ```{rubric} Reset Nodes and Remove them
  # ```
  # ---
  # These tasks reset the target nodes with `kubeadm` then remove them from the
  # target cluster.
- name: Reset existing nodes
  ansible.builtin.shell:
    cmd: kubeadm reset -f
  register: reset_result
- name: Show reset results
  ansible.builtin.debug:
    var: reset_result.stdout
- name: Delete nodes from cluster
  ansible.builtin.shell:
    cmd: "kubectl delete nodes {{ inventory_hostname }}"
  delegate_to: kcp01
